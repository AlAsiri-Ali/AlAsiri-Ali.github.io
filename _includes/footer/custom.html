<!-- start custom footer snippets -->

<!-- Load dual theme CSS -->
<link rel="stylesheet" href="{{ '/assets/css/dual-theme.css' | relative_url }}">

<!-- Theme toggle button styles -->
<style>
  /* Ø²Ø± Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ - Ù…Ø¹ Ø®Ø§ØµÙŠØ© Ø§Ù„Ø§Ø®ØªÙØ§Ø¡ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ */
  .theme-toggle-btn {
    position: fixed;
    bottom: 80px;
    right: 20px;
    background: #007acc;
    color: white;
    border: none;
    border-radius: 50%;
    width: 55px;
    height: 55px;
    font-size: 22px;
    cursor: pointer;
    z-index: 9999 !important;
    transition: all 0.5s ease;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    display: flex !important;
    align-items: center;
    justify-content: center;
    opacity: 1;
    transform: scale(1);
  }
  
  /* Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø®ØªÙØ§Ø¡ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ */
  .theme-toggle-btn.auto-hide {
    opacity: 0.2;
    transform: scale(0.8);
  }
  
  .theme-toggle-btn:hover,
  .theme-toggle-btn:focus,
  .theme-toggle-btn.show-temporary {
    opacity: 1 !important;
    transform: scale(1.1) !important;
    background: #005a9e !important;
  }

  body.theme-dark .theme-toggle-btn {
    background: #00adb5;
  }

  body.theme-dark .theme-toggle-btn:hover,
  body.theme-dark .theme-toggle-btn:focus,
  body.theme-dark .theme-toggle-btn.show-temporary {
    background: #4db6ac !important;
  }
  
  /* Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
  @media (max-width: 768px) {
    .theme-toggle-btn {
      bottom: 100px;
      right: 15px;
      width: 50px;
      height: 50px;
      font-size: 20px;
    }
    
    /* Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„ ÙŠØ®ØªÙÙŠ Ø£ÙƒØ«Ø± Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ù…Ø³Ø§Ø­Ø© */
    .theme-toggle-btn.auto-hide {
      opacity: 0.1;
      transform: scale(0.7);
    }
  }
  
  @media (max-width: 480px) {
    .theme-toggle-btn {
      bottom: 90px;
      right: 10px;
      width: 45px;
      height: 45px;
      font-size: 18px;
    }
  }
  
  /* Ù„Ù„Ù…Ø³ Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„ - Ù…Ù†Ø·Ù‚Ø© Ø£ÙƒØ¨Ø± Ù„Ù„Ù…Ø³ */
  @media (max-width: 768px) {
    .theme-toggle-btn::before {
      content: '';
      position: absolute;
      top: -10px;
      left: -10px;
      right: -10px;
      bottom: -10px;
      z-index: -1;
    }
  }
</style>

<!-- Theme toggle button - Ù…ÙˆÙ‚Ø¹ Ø¢Ù…Ù† -->
<button class="theme-toggle-btn" id="theme-toggle-btn" title="Toggle Theme">
  ğŸŒ™
</button>

<script>
let hideTimer;
let isUserActive = false;

function toggleTheme() {
  const body = document.body;
  const button = document.getElementById('theme-toggle-btn');
  
  if (body.classList.contains('theme-dark')) {
    body.classList.remove('theme-dark');
    button.innerHTML = 'ğŸŒ™';
    localStorage.setItem('website-theme', 'light');
  } else {
    body.classList.add('theme-dark');
    button.innerHTML = 'â˜€ï¸';
    localStorage.setItem('website-theme', 'dark');
  }
  
  // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø²Ø± Ù…Ø¤Ù‚ØªØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶ØºØ·
  showButtonTemporarily();
}

function showButtonTemporarily() {
  const button = document.getElementById('theme-toggle-btn');
  if (!button) return;
  
  // Ø¥Ù„ØºØ§Ø¡ Ø£ÙŠ timer Ø³Ø§Ø¨Ù‚
  clearTimeout(hideTimer);
  
  // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø²Ø±
  button.classList.remove('auto-hide');
  button.classList.add('show-temporary');
  
  // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø²Ø± Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ÙŠ Ù…Ù† Ø¹Ø¯Ù… Ø§Ù„Ù†Ø´Ø§Ø·
  hideTimer = setTimeout(() => {
    if (!isUserActive) {
      button.classList.remove('show-temporary');
      button.classList.add('auto-hide');
    }
  }, 3000);
}

function handleUserActivity() {
  isUserActive = true;
  showButtonTemporarily();
  
  // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ø´Ø§Ø· Ø¨Ø¹Ø¯ ÙØªØ±Ø© Ù‚ØµÙŠØ±Ø©
  setTimeout(() => {
    isUserActive = false;
  }, 100);
}

// Load saved theme
(function() {
  const savedTheme = localStorage.getItem('website-theme');
  if (savedTheme === 'dark') {
    document.body.classList.add('theme-dark');
  }
})();

// Update button when ready
function updateButton() {
  const savedTheme = localStorage.getItem('website-theme');
  const button = document.getElementById('theme-toggle-btn');
  
  if (button) {
    button.innerHTML = savedTheme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
    button.addEventListener('click', toggleTheme);
    
    // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹Ø§Øª Ù„Ù„Ø£Ø­Ø¯Ø§Ø«
    button.addEventListener('mouseenter', handleUserActivity);
    button.addEventListener('mouseleave', () => {
      setTimeout(() => {
        if (!isUserActive) {
          button.classList.add('auto-hide');
          button.classList.remove('show-temporary');
        }
      }, 1000);
    });
    
    // Ù„Ù„Ø¬ÙˆØ§Ù„ - Ø¥Ø¸Ù‡Ø§Ø± Ø¹Ù†Ø¯ Ø§Ù„Ù„Ù…Ø³
    button.addEventListener('touchstart', handleUserActivity);
    
    // Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªÙØ§Ø¡ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    setTimeout(() => {
      button.classList.add('auto-hide');
    }, 2000);
  }
}

// Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø²Ø± Ø¹Ù†Ø¯ Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø§ÙˆØ³ ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø³ÙÙ„ÙŠØ© Ø§Ù„ÙŠÙ…Ù†Ù‰
function handleMouseMove(e) {
  const windowWidth = window.innerWidth;
  const windowHeight = window.innerHeight;
  
  // Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø§Ø³ØªØ´Ø¹Ø§Ø± - Ø§Ù„Ø±Ø¨Ø¹ Ø§Ù„Ø³ÙÙ„ÙŠ Ø§Ù„Ø£ÙŠÙ…Ù† Ù…Ù† Ø§Ù„Ø´Ø§Ø´Ø©
  const isInTriggerZone = (
    e.clientX > windowWidth * 0.75 && 
    e.clientY > windowHeight * 0.75
  );
  
  if (isInTriggerZone) {
    handleUserActivity();
  }
}

// Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø²Ø± Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ±
function handleScroll() {
  handleUserActivity();
}

// ØªØ´ØºÙŠÙ„ ÙƒÙ„ Ø´ÙŠØ¡
function initializeThemeToggle() {
  updateButton();
  
  // Ù…Ø³ØªÙ…Ø¹Ø§Øª Ù„Ù„Ù…Ø§ÙˆØ³ ÙˆØ§Ù„ØªÙ…Ø±ÙŠØ±
  document.addEventListener('mousemove', handleMouseMove);
  document.addEventListener('scroll', handleScroll);
  
  // Ù„Ù„Ø¬ÙˆØ§Ù„ - Ø¥Ø¸Ù‡Ø§Ø± Ø¹Ù†Ø¯ Ø§Ù„Ù„Ù…Ø³ ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù†
  document.addEventListener('touchstart', (e) => {
    const windowWidth = window.innerWidth;
    const windowHeight = window.innerHeight;
    
    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù„Ù…Ø³ ÙÙŠ Ø§Ù„Ù†ØµÙ Ø§Ù„Ø³ÙÙ„ÙŠ Ø§Ù„Ø£ÙŠÙ…Ù†
    if (e.touches[0].clientX > windowWidth * 0.5 && 
        e.touches[0].clientY > windowHeight * 0.5) {
      handleUserActivity();
    }
  });
}

// ØªØ´ØºÙŠÙ„ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initializeThemeToggle);
} else {
  initializeThemeToggle();
}

// Ø¶Ù…Ø§Ù† Ø¥Ø¶Ø§ÙÙŠ - ØªØ´ØºÙŠÙ„ Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ±
setTimeout(initializeThemeToggle, 500);
setTimeout(initializeThemeToggle, 1500);
</script>

<!-- end custom footer snippets -->
